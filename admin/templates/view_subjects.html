{% extends "subjects_layout.html" %}

{% block sub_content %}
<div class="container bg-white p-3">
  <div class="d-flex align-items-center">
    <hr class="flex-grow-1">
    <h5 class="mx-3 text-center fw-light">
      <i class="fa fa-book"></i> Subject Teacher Distribution Analysis
    </h5>
    <hr class="flex-grow-1">
  </div>

  {% if grouped_subjects %}
    {% for subject_name, teachers in grouped_subjects.items() %}
      <div class="border mb-3 p-3 mt-3">
        <h5 class="text-center fw-bold">
          {{ subject_name|upper }}
        </h5>
        <table class="table table-bordered border table-hover">
          <thead class="table-light">
            <tr>
              <th style="width: 1%">#</th>
              <th class="border">Branch</th>
              <th class="border">Grade</th>
              <th class="border">Stream</th>
              <th class="border">Teacher</th>
            </tr>
          </thead>
          <tbody>
            {% for t in teachers %}
              <tr>
                <td>{{ loop.index }}</td>
                <td>{{ t.branch }}</td>
                <td>{{ t.grade }}</td>
                <td>{{ t.stream if t.stream else '---' }}</td>
                <td>{{ t.teacher }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% endfor %}
  {% else %}
    <p class="text-center text-muted">No subjects assigned yet.</p>
  {% endif %}
</div>
{% endblock sub_content %}
