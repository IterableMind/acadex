{% extends "subjects_layout.html" %}

{% block sub_content %} 
  <div class="container bg-white p-3">
    <div class="d-flex align-items-center">
      <hr class="flex-grow-1">
      <h5 class="mx-3 text-center fw-light">
        <i class="fa fa-book"></i> Subject Teacher Distribution Analysis
      </h5>
      <hr class="flex-grow-1"> 
    </div>

    {% if all_subjects %}
      {% for subject in all_subjects %}
        <div class="border mb-3 p-3">
          <h5 class="text-center fw-bold" style="color: #45cab9">
            {{ subject.subject }}
          </h5>
          <table class="table table-bordered">
            <thead class="table-light">
              <tr>
                <th>Grade</th>
                <th>Stream</th>
                <th>Teacher</th>
              </tr>
            </thead>
            <tbody>
              {% for assignment in subject.teacher_assignments %}
                <tr>
                  <td>{{ assignment.grade }}</td>
                  <td>{{ assignment.stream if assignment.stream else '---' }}</td>
                  <td>{{ assignment.teacher.teacher_name }}</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      {% endfor %}
    {% else %}
      <p class="text-center text-muted">No subjects assigned yet.</p>
    {% endif %}
  </div>
{% endblock sub_content %}
